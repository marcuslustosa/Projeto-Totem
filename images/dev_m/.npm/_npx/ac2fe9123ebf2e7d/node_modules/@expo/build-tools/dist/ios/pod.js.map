{"version":3,"file":"pod.js","sourceRoot":"","sources":["../../src/ios/pod.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAwB;AAGxB,sEAAuC;AAIhC,KAAK,UAAU,WAAW,CAAuB,GAAuB;IAC7E,MAAM,MAAM,GAAG,cAAI,CAAC,IAAI,CAAC,GAAG,CAAC,2BAA2B,EAAE,KAAK,CAAC,CAAC;IAEjE,MAAM,IAAA,sBAAK,EAAC,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE;QAC9B,GAAG,EAAE,MAAM;QACX,MAAM,EAAE,GAAG,CAAC,MAAM;QAClB,GAAG,gDACE,GAAG,CAAC,GAAG,KACV,IAAI,EAAE,aAAa,KAChB,CAAC,GAAG,CAAC,GAAG,CAAC,6BAA6B;YACvC,CAAC,CAAC,EAAE,wBAAwB,EAAE,GAAG,CAAC,GAAG,CAAC,6BAA6B,EAAE;YACrE,CAAC,CAAC,EAAE,CAAC,CACR;QACD,eAAe,EAAE,CAAC,IAAa,EAAE,EAAE;YACjC,IACE,CAAC,IAAI;gBACL,2EAA2E,CAAC,IAAI,CAAC,IAAI,CAAC,EACtF;gBACA,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,IAAI,CAAC;aACb;QACH,CAAC;KACF,CAAC,CAAC;AACL,CAAC;AAxBD,kCAwBC","sourcesContent":["import path from 'path';\n\nimport { Ios } from '@expo/eas-build-job';\nimport spawn from '@expo/turtle-spawn';\n\nimport { BuildContext } from '../context';\n\nexport async function installPods<TJob extends Ios.Job>(ctx: BuildContext<TJob>): Promise<void> {\n  const iosDir = path.join(ctx.reactNativeProjectDirectory, 'ios');\n\n  await spawn('pod', ['install'], {\n    cwd: iosDir,\n    logger: ctx.logger,\n    env: {\n      ...ctx.env,\n      LANG: 'en_US.UTF-8',\n      ...(ctx.env.EAS_BUILD_COCOAPODS_CACHE_URL\n        ? { NEXUS_COCOAPODS_REPO_URL: ctx.env.EAS_BUILD_COCOAPODS_CACHE_URL }\n        : {}),\n    },\n    lineTransformer: (line?: string) => {\n      if (\n        !line ||\n        /\\[!\\] '[\\w-]+' uses the unencrypted 'http' protocol to transfer the Pod\\./.exec(line)\n      ) {\n        return null;\n      } else {\n        return line;\n      }\n    },\n  });\n}\n"]}